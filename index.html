<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shay Analytics AI</title>
  <link rel="icon" href="Brand/logo-192.png" sizes="192x192" />
  <link rel="icon" href="Brand/logo-512.png" sizes="512x512" />
  <link rel="apple-touch-icon" href="Brand/logo-192.png" />
  <meta property="og:title" content="Shay Analytics AI" />
  <meta property="og:image" content="Brand/logo-512.png" />
  <meta property="og:image:alt" content="Shay Analytics AI logo" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="Brand/logo-512.png" />
  <link rel="stylesheet" href="./styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <main id="landingView">
    <header class="landing-header">
      <div class="brand">
        <div class="logo">
          <img class="logo-img" src="Brand/logo.png" alt="Shay Analytics AI" />
        </div>
        <div>
          <h1>Shay Analytics AI</h1>
          <p>AI analytics copilots for modern teams.</p>
        </div>
      </div>
      <nav class="landing-nav">
        <a href="#product">Product</a>
        <a href="#samples">Samples</a>
        <a href="#pricing">Pricing</a>
        <a href="#docs">Docs</a>
      </nav>
      <div class="landing-actions">
        <button id="signInBtn" class="ghost" data-action="signin">Sign In</button>
        <button id="startFreeBtn" class="primary" data-action="start-free">Start free analysis</button>
      </div>
    </header>

    <section class="hero" id="product">
      <span class="pill">New AI powered insights</span>
      <h2>AI that turns raw data into executive insights</h2>
      <p>Upload CSV, connect APIs, sync Google Sheets, and export an AI brief in minutes.</p>
      <div class="hero-actions">
        <button id="heroStartBtn" class="primary" data-action="start-free">Start free analysis</button>
        <button id="viewSamplesBtn" class="ghost" data-action="view-samples">View sample insights</button>
      </div>
      <p id="webhookStatus" class="helper-text">Webhook status: checking...</p>
    </section>

    <section class="feature-grid">
      <div class="feature-card">
        <h3>Auto profiling</h3>
        <p>Detects metrics, dates, and quality signals instantly.</p>
      </div>
      <div class="feature-card">
        <h3>Industry insights</h3>
        <p>Segmented views reveal performance by vertical.</p>
      </div>
      <div class="feature-card">
        <h3>KPI trends</h3>
        <p>Time-series summaries highlight momentum.</p>
      </div>
      <div class="feature-card">
        <h3>Exportable reports</h3>
        <p>Share a polished PDF in seconds.</p>
      </div>
    </section>

    <section class="sample-preview" id="samples">
      <div class="sample-copy">
        <div class="sample-header">
          <div>
            <h3>Sample insights</h3>
            <p>Preview how Shay Analytics AI surfaces lift, risk, and growth opportunities.</p>
          </div>
          <span class="demo-badge">Demo data</span>
        </div>
        <div id="sampleKpiGrid" class="sample-kpis"></div>
      </div>
      <div class="sample-visual">
        <div class="sample-trend">
          <div class="trend-header">
            <div>
              <h4>Month over month trend</h4>
              <p class="helper-text">Last 30 days vs prior 30 days</p>
            </div>
            <div class="trend-controls">
              <label>Metric
                <select id="sampleTrendMetric"></select>
              </label>
              <label>Breakdown
                <select id="sampleTrendBreakdown">
                  <option value="overall">Overall</option>
                  <option value="plan">By plan</option>
                  <option value="channel">By channel</option>
                </select>
              </label>
            </div>
          </div>
          <div id="sampleTrendChart" class="trend-chart"></div>
        </div>
        <div class="sample-details">
          <div class="detail-chart">
            <div class="detail-header">
              <h4>Performance details</h4>
              <label>Dimension
                <select id="sampleDimensionSelect">
                  <option value="plan">Plan</option>
                  <option value="channel">Channel</option>
                  <option value="region">Region</option>
                </select>
              </label>
            </div>
            <div id="sampleBreakdownChart" class="breakdown-chart"></div>
          </div>
          <div id="sampleInsightsRoot" class="sample-cards"></div>
        </div>
      </div>
    </section>

    <section class="social-proof" id="pricing">
      <p>Built for modern analytics teams</p>
    </section>

    <footer class="landing-footer" id="docs">
      <a href="#" aria-disabled="true">Terms</a>
      <a href="#" aria-disabled="true">Privacy</a>
      <a href="#" aria-disabled="true">Contact</a>
    </footer>
  </main>

  <main id="appView" class="hidden">
    <header class="app-header">
      <div class="brand">
        <div class="logo">
          <img class="logo-img" src="Brand/logo.png" alt="Shay Analytics AI" />
        </div>
        <div>
          <h1>Shay Analytics AI</h1>
          <p>Upload, connect, and explore your data.</p>
        </div>
      </div>
      <div class="app-header-actions">
        <div class="tabs header-tabs">
          <button class="tab-button active" data-tab="upload" data-action="tab-upload">Upload CSV</button>
          <button class="tab-button" data-tab="sheets" data-action="tab-sheets">Google Sheets</button>
          <button class="tab-button" data-tab="api" data-action="tab-api">Connect API</button>
          <button class="tab-button" data-tab="pdf" data-action="tab-pdf">Upload PDF</button>
          <button class="tab-button" data-tab="samples" data-action="tab-samples">Samples</button>
        </div>
        <div class="app-toolbar">
          <label class="toolbar-field">
            <span>Industry</span>
            <select id="industrySelect" disabled>
              <option value="All">All</option>
            </select>
            <span id="industryHelper" class="helper-text"></span>
          </label>
          <button id="downloadPdf" class="primary" data-action="export-pdf">Export PDF</button>
          <button id="signOutButton" class="ghost" data-action="signout">Sign out</button>
        </div>
      </div>
    </header>

    <main class="container">
      <section id="status" class="status hidden"></section>
      <section id="error" class="error hidden"></section>
      <section id="warnings" class="warnings hidden"></section>

      <section id="state" class="state tab-panel" data-tab-panel="upload">
        <div class="upload-panel">
          <div class="drop-zone" id="dropZone">
            <p>Drag and drop a CSV here</p>
            <button id="uploadTrigger" class="ghost">Choose file</button>
            <button id="loadFixture" class="ghost hidden">Load fixture</button>
            <input type="file" id="uploadInput" accept=".csv,text/csv" />
          </div>
          <div class="upload-help">
            <p>Supported: CSV with headers. We handle currency symbols, percent values, and thousands separators.</p>
          </div>
        </div>
        <div class="state-card">
          <h2>Get started</h2>
          <p>Upload a CSV file to generate KPIs, charts, and a data table. Your data never leaves the browser.</p>
          <ul class="state-list">
            <li>Auto-detects numeric metrics</li>
            <li>Finds date columns for trends</li>
            <li>Profiles data quality before analysis</li>
          </ul>
        </div>
      </section>

      <section id="apiPanel" class="tab-panel hidden" data-tab-panel="api">
        <div class="table-card">
          <div class="table-header">
            <h3>Connect API</h3>
            <p>Provide a GET endpoint that returns a JSON array of objects.</p>
          </div>
          <div class="api-form">
            <label>Base URL <input type="text" id="apiBaseUrl" placeholder="https://api.example.com" /></label>
            <label>Auth type
              <select id="apiAuthType">
                <option value="none">None</option>
                <option value="apiKey">API Key</option>
                <option value="bearer">Bearer Token</option>
              </select>
            </label>
            <label>Credential <input type="password" id="apiKey" placeholder="••••••••" /></label>
            <label>Endpoint <input type="text" id="apiEndpoint" placeholder="/v1/data" /></label>
            <button id="testApi" class="ghost" data-action="test-api">Fetch data</button>
            <p id="apiStatus" class="helper-text">Supports JSON arrays of objects.</p>
          </div>
        </div>
      </section>

      <section id="pdfPanel" class="tab-panel hidden" data-tab-panel="pdf">
        <div class="table-card">
          <div class="table-header">
            <h3>Upload PDF</h3>
            <p>Upload a PDF that contains a clear, table-like layout. We will extract the first 6 pages.</p>
          </div>
          <div class="api-form">
            <label>PDF file
              <input type="file" id="pdfInput" accept="application/pdf" />
            </label>
            <div id="pdfStatus" class="helper-text">PDFs must include visible table rows and columns.</div>
            <div id="pdfMeta" class="helper-text"></div>
          </div>
        </div>
      </section>

      <section id="sheetsPanel" class="tab-panel hidden" data-tab-panel="sheets">
        <div class="table-card">
          <div class="table-header">
            <h3>Google Sheets</h3>
            <p>Paste a Google Sheets link. Private sheets require Google connect.</p>
          </div>
          <div class="api-form">
            <label>Paste Google Sheets CSV link
              <input type="text" id="sheetsUrl" placeholder="https://docs.google.com/spreadsheets/.../export?format=csv" />
            </label>
            <label>Range (optional)
              <input type="text" id="sheetsRange" placeholder="Sheet1!A1:Z1000" />
            </label>
            <div class="sheets-actions">
              <button id="loadSheet" class="ghost" data-action="load-sheet">Load sheet</button>
              <button id="loginGoogle" class="ghost" data-action="login-google">Connect Google</button>
              <span id="googleStatus" class="status-badge offline">Not logged in</span>
            </div>
            <p id="sheetsHelper" class="helper-text">Paste a Google Sheets link. If it is an edit link, the app will convert it to a CSV export link.</p>
          </div>
        </div>
      </section>

      <section id="samplesPanel" class="tab-panel hidden" data-tab-panel="samples">
        <div class="table-card">
          <div class="table-header">
            <h3>Samples</h3>
            <p>Pick a curated dataset to preview KPIs and trends.</p>
          </div>
          <div id="sampleGallery" class="sample-grid"></div>
          <div class="suggested-trends">
            <h4>Suggested trends</h4>
            <ul id="suggestedTrends"></ul>
          </div>
        </div>
      </section>

      <section id="dashboard" class="dashboard hidden">
        <div class="demo-banner">Demo dataset. No client data.</div>
        <div id="metricNotice" class="status hidden"></div>
        <div class="section-header">
          <div class="section-title">
            <h2>Dashboard</h2>
            <span id="qualityBadge" class="quality-badge">Quality —</span>
          </div>
          <p id="datasetSummary"></p>
        </div>

        <section class="kpi-grid" id="kpiGrid"></section>

        <section class="controls-panel">
          <div class="control-group">
            <label for="metricSelect">Primary metric</label>
            <select id="metricSelect"></select>
          </div>
          <div class="control-group">
            <label for="dimensionSelect">Breakdown dimension</label>
            <select id="dimensionSelect"></select>
          </div>
          <div class="control-group">
            <label for="topN">Top N</label>
            <select id="topN">
              <option value="5">5</option>
              <option value="8" selected>8</option>
              <option value="12">12</option>
            </select>
          </div>
          <div class="control-group">
            <label for="domainSelect">Domain</label>
            <select id="domainSelect">
              <option value="auto" selected>Auto-detect</option>
              <option value="finance">Finance</option>
              <option value="marketing">Marketing</option>
              <option value="product">Product</option>
              <option value="operations">Operations</option>
              <option value="general">General</option>
            </select>
          </div>
          <div class="control-group">
            <label for="dateStart">Date start</label>
            <input type="date" id="dateStart" />
          </div>
          <div class="control-group">
            <label for="dateEnd">Date end</label>
            <input type="date" id="dateEnd" />
          </div>
          <div class="control-group control-actions">
            <label>Actions</label>
            <div class="control-buttons">
              <button id="exportCsv" class="ghost" data-action="export-csv">Export filtered CSV</button>
              <button id="downloadInsights" class="ghost" data-action="download-insights">Download insights</button>
              <button id="exportSheets" class="ghost" data-action="export-sheets">Export to Google Sheets</button>
            </div>
            <p id="exportStatus" class="helper-text"></p>
          </div>
        </section>

        <section class="charts">
          <div class="filter-badge" id="filterBadge">Filtered to: All</div>
          <div class="chart-card">
            <div class="chart-header">
              <h3 id="trendTitle">Trend</h3>
              <p id="trendSubtitle"></p>
            </div>
            <canvas id="trendChart" height="140"></canvas>
          </div>
          <div class="chart-card">
            <div class="chart-header">
              <h3 id="barTitle">Breakdown</h3>
              <p id="barSubtitle"></p>
            </div>
            <canvas id="barChart" height="140"></canvas>
          </div>
          <div class="chart-card">
            <div class="chart-header">
              <h3 id="extraTitle">Analysis</h3>
              <p id="extraSubtitle"></p>
            </div>
            <canvas id="extraChart" height="140"></canvas>
          </div>
        </section>

        <section class="heatmap-card" id="comparisonSection">
          <div class="chart-header">
            <h3>Metric Comparison</h3>
            <p>Pick a primary metric and compare drivers, trends, and segments.</p>
            <p id="comparisonNote" class="helper-text"></p>
          </div>
          <div class="comparison-controls">
            <div class="control-group">
              <label for="primaryMetricSelect">Primary Metric</label>
              <select id="primaryMetricSelect"></select>
            </div>
            <div class="control-group">
              <label for="compareMetricSelect">Compare Against (up to 5)</label>
              <select id="compareMetricSelect" multiple size="4"></select>
            </div>
          </div>
          <div class="heatmap-wrapper">
            <canvas id="comparisonTrendChart"></canvas>
          </div>
          <div class="comparison-grid">
            <div class="comparison-card">
              <h4>Drivers and relationships</h4>
              <ul id="driversList"></ul>
            </div>
            <div class="comparison-card">
              <h4>Segment view</h4>
              <div class="heatmap-wrapper small">
                <canvas id="segmentChart"></canvas>
              </div>
            </div>
          </div>
        </section>

        <section class="insights-card">
          <div class="chart-header">
            <h3>Insights</h3>
            <p>What changed, what stands out, and where to look next.</p>
          </div>
          <ul id="insightsList"></ul>
        </section>

        <section class="table-card">
          <div class="table-header">
            <h3>Data Profile</h3>
            <p>Column schema, quality, and quick stats.</p>
          </div>
          <div class="table-wrap">
            <table id="profileTable"></table>
          </div>
        </section>

        <section class="table-card">
          <div class="table-header">
            <h3>Data Preview</h3>
            <p>Click any column to sort. Showing up to 50 rows.</p>
          </div>
          <div class="table-wrap">
            <table id="dataTable"></table>
          </div>
        </section>
      </section>
    </main>
  </main>

  <footer class="site-footer">
    <p>Built with plain HTML, CSS, JavaScript, PapaParse, and Chart.js. <span id="buildStamp"></span></p>
  </footer>

  <div id="signupModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-brand">
        <img class="logo-img" src="Brand/logo.png" alt="Shay Analytics AI" />
        <span>Shay Analytics AI</span>
      </div>
      <button id="closeModal" class="modal-close">×</button>
      <h3>Start for Free</h3>
      <p class="helper-text">Create your account to unlock the dashboard.</p>
      <form id="signupForm" class="modal-form" novalidate>
        <label class="signup-only">Full name
          <input type="text" id="signupName" required />
          <span class="field-error" id="nameError"></span>
        </label>
        <label>Email
          <input type="email" id="signupEmail" required />
          <span class="field-error" id="emailError"></span>
        </label>
        <label class="signup-only">Company
          <input type="text" id="signupCompany" required />
          <span class="field-error" id="companyError"></span>
        </label>
        <label class="signup-only">Use case
          <select id="signupUseCase" required>
            <option value="">Select one</option>
            <option value="Marketing reporting">Marketing reporting</option>
            <option value="Sales performance">Sales performance</option>
            <option value="Finance and budgeting">Finance and budgeting</option>
            <option value="HR analytics">HR analytics</option>
            <option value="Product analytics">Product analytics</option>
            <option value="Operations">Operations</option>
            <option value="Other">Other</option>
          </select>
          <span class="field-error" id="useCaseError"></span>
        </label>
        <label id="useCaseDetailField" class="hidden signup-only">Describe your use case
          <input type="text" id="signupUseCaseDetail" placeholder="Example: Weekly campaign performance dashboards for client teams" />
          <span class="field-error" id="useCaseDetailError"></span>
        </label>
        <button id="signupSubmit" type="submit" class="primary" disabled>Create account</button>
        <div id="signupDebug" class="helper-text hidden"></div>
      </form>
      <div id="signup-status" style="margin-top:8px;font-size:12px;opacity:.8"></div>
      <p id="formError" class="helper-text"></p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@1.3.0/dist/chartjs-chart-matrix.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script type="module" src="./src/marketing.js"></script>
  <script src="./app.js" defer></script>
</body>
</html>
